#!/usr/bin/env python

import sys
import os

MOZDIR=os.path.join(os.getenv('HOME'), 'code/moz')

def error(msg):
    sys.stderr.write(msg + '\n')
    sys.exit(1)

if __name__ == '__main__':
    if len(sys.argv) == 1:
        print(MOZDIR)
    elif len(sys.argv) == 2:
        arg = sys.argv[1]
        prefixes = [arg, 'ff-' + arg + '/src']
        dirs = [os.path.join(MOZDIR, d) for d in prefixes]

        if os.getcwd().startswith(MOZDIR):
            dirs.append('../' + arg)

        for d in dirs:
            if os.path.exists(d):
                print(d)
                sys.exit(0)

        error('No matching directory found.')
    else:
        error('Too many arguments.')
